-- สร้างตาราง employees สำหรับตัวอย่าง
CREATE TABLE employees (
    employee_id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    first_name VARCHAR2(50),
    last_name VARCHAR2(50),
    salary NUMBER(8, 2),
    bonus NUMBER(8, 2),
    PRIMARY KEY (employee_id)
);

-- แทรกข้อมูลตัวอย่าง
INSERT INTO employees (first_name, last_name, salary, bonus) VALUES ('John', 'Doe', 50000, 5000);
INSERT INTO employees (first_name, last_name, salary, bonus) VALUES ('Jane', 'Smith', 60000, 0);
INSERT INTO employees (first_name, last_name, salary, bonus) VALUES ('Alice', 'Johnson', 55000, 5500);

-- คอมมิตการเปลี่ยนแปลง
COMMIT;




DECLARE
    v_employee_id employees.employee_id%TYPE;
    v_salary employees.salary%TYPE;
    v_bonus employees.bonus%TYPE;
    v_ratio NUMBER;
BEGIN
    -- การวนซ้ำในตาราง employees
    FOR rec IN (SELECT employee_id, salary, bonus FROM employees) LOOP
        v_employee_id := rec.employee_id;
        v_salary := rec.salary;
        v_bonus := rec.bonus;

        -- การคำนวณโบนัสหารด้วยเงินเดือน โดยใช้ NULLIF เพื่อหลีกเลี่ยงการหารด้วยศูนย์
        v_ratio := v_salary / NULLIF(v_bonus, 0);

        -- แสดงผลลัพธ์
        DBMS_OUTPUT.PUT_LINE('Employee ID: ' || v_employee_id || ', Salary: ' || v_salary || ', Bonus: ' || v_bonus || ', Ratio: ' || v_ratio);
    END LOOP;
END;
